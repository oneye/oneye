var SearchReplaceDialog;tinyMCEPopup.requireLangPack(),SearchReplaceDialog={init:function(a){var b=this,c=document.forms[0],d=tinyMCEPopup.getWindowArg("mode");b.switchMode(d),c[d+"_panel_searchstring"].value=tinyMCEPopup.getWindowArg("search_string"),c[d+"_panel_searchstring"].focus(),mcTabs.onChange.add(function(a,c){b.switchMode(a.substring(0,a.indexOf("_")))})},switchMode:function(a){var b,c=this.lastMode;c!=a&&(b=document.forms[0],c&&(b[a+"_panel_searchstring"].value=b[c+"_panel_searchstring"].value,b[a+"_panel_backwardsu"].checked=b[c+"_panel_backwardsu"].checked,b[a+"_panel_backwardsd"].checked=b[c+"_panel_backwardsd"].checked,b[a+"_panel_casesensitivebox"].checked=b[c+"_panel_casesensitivebox"].checked),mcTabs.displayTab(a+"_tab",a+"_panel"),document.getElementById("replaceBtn").style.display=a=="replace"?"inline":"none",document.getElementById("replaceAllBtn").style.display=a=="replace"?"inline":"none",this.lastMode=a)},searchNext:function(a){function m(){d=c.getRng().cloneRange(),b.getDoc().execCommand("SelectAll",!1,null),c.setRng(d)}function n(){b.selection.setContent(rs)}var b=tinyMCEPopup.editor,c=b.selection,d=c.getRng(),e,f=this.lastMode,g,h,i=0,j=b.getWin(),k=b.windowManager,l=0;e=document.forms[0],g=e[f+"_panel_searchstring"].value,h=e[f+"_panel_backwardsu"].checked,ca=e[f+"_panel_casesensitivebox"].checked,rs=e.replace_panel_replacestring.value,tinymce.isIE&&(d=b.getDoc().selection.createRange());if(g=="")return;ca&&(i|=4);switch(a){case"all":b.execCommand("SelectAll"),b.selection.collapse(!0);if(tinymce.isIE){b.focus(),d=b.getDoc().selection.createRange();while(d.findText(g,h?-1:1,i))d.scrollIntoView(),d.select(),n(),l=1,h&&d.moveEnd("character",-rs.length);tinyMCEPopup.storeSelection()}else while(j.find(g,ca,h,!1,!1,!1,!1))n(),l=1;l?tinyMCEPopup.alert(b.getLang("searchreplace_dlg.allreplaced")):tinyMCEPopup.alert(b.getLang("searchreplace_dlg.notfound"));return;case"current":b.selection.isCollapsed()||n()}c.collapse(h),d=c.getRng();if(!g)return;tinymce.isIE?(b.focus(),d=b.getDoc().selection.createRange(),d.findText(g,h?-1:1,i)?(d.scrollIntoView(),d.select()):tinyMCEPopup.alert(b.getLang("searchreplace_dlg.notfound")),tinyMCEPopup.storeSelection()):j.find(g,ca,h,!1,!1,!1,!1)?m():tinyMCEPopup.alert(b.getLang("searchreplace_dlg.notfound"))}},tinyMCEPopup.onInit.add(SearchReplaceDialog.init,SearchReplaceDialog);